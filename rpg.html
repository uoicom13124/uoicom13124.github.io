<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>Advanced RPG</title>
<style>
  body { margin:0; overflow:hidden; background:#111; }
  canvas { display:block; }
</style>
</head>
<body>

<canvas id="game"></canvas>

<script>
/* ================= CONFIG ================= */
const TILE = 32;
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

canvas.width = innerWidth;
canvas.height = innerHeight;

/* ================= INPUT ================= */
const keys = {};
addEventListener("keydown", e => keys[e.key] = true);
addEventListener("keyup", e => keys[e.key] = false);

/* ================= MAP ================= */
const MAP_W = 200;
const MAP_H = 200;
const map = [];

for (let y=0;y<MAP_H;y++){
  map[y]=[];
  for(let x=0;x<MAP_W;x++){
    map[y][x] = Math.random()<0.15 ? 1 : 0;
  }
}

/* ================= PLAYER ================= */
const player = {
  x: MAP_W*TILE/2,
  y: MAP_H*TILE/2,
  size: 24,
  speed: 3,
  hp: 100,
  atk: 20,
  atkCooldown: 0
};

/* ================= ENEMY ================= */
const enemies = [];
for(let i=0;i<20;i++){
  enemies.push({
    x: Math.random()*MAP_W*TILE,
    y: Math.random()*MAP_H*TILE,
    size: 24,
    speed: 1.5,
    hp: 40
  });
}

/* ================= COLLISION ================= */
function isWall(px,py){
  const tx = Math.floor(px/TILE);
  const ty = Math.floor(py/TILE);
  return map[ty]?.[tx]===1;
}

/* ================= CAMERA*
